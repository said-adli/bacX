[{"filePath":"C:\\bacx\\src\\actions\\academic.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'createClient' is defined but never used.","line":3,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":3,"endColumn":22}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use server';\r\n\r\nimport { createClient } from \"@/utils/supabase/server\";\r\nimport { createAdminClient } from \"@/utils/supabase/admin\";\r\nimport { requireAdmin } from \"@/lib/auth-guard\";\r\n\r\n// Types\r\ninterface SubjectData { name: string; icon: string; order: number; }\r\ninterface UnitData { name: string; order: number; }\r\ninterface LessonData { title: string; videoUrl: string; duration: string; isFree: boolean; order: number; }\r\n\r\n// SUBJECTS\r\nexport async function createSubject(data: SubjectData) {\r\n    try {\r\n        await requireAdmin();\r\n        const admin = createAdminClient();\r\n        const { error } = await admin.from('subjects').insert({\r\n            name: data.name,\r\n            icon: data.icon,\r\n            order: data.order\r\n        });\r\n        if (error) throw error;\r\n        return { success: true };\r\n    } catch (e) { return { success: false, message: String(e) }; }\r\n}\r\n\r\nexport async function deleteSubject(id: string) {\r\n    try {\r\n        await requireAdmin();\r\n        const admin = createAdminClient();\r\n        // Cascade delete should handle units/lessons if set up in DB. \r\n        // If not, we might need manual cleanup. Assuming DB cascade.\r\n        const { error } = await admin.from('subjects').delete().eq('id', id);\r\n        if (error) throw error;\r\n        return { success: true };\r\n    } catch (e) { return { success: false, message: String(e) }; }\r\n}\r\n\r\n// UNITS\r\nexport async function createUnit(subjectId: string, data: UnitData) {\r\n    try {\r\n        await requireAdmin();\r\n        const admin = createAdminClient();\r\n        const { error } = await admin.from('units').insert({\r\n            subject_id: subjectId,\r\n            name: data.name,\r\n            order: data.order\r\n        });\r\n        if (error) throw error;\r\n        return { success: true };\r\n    } catch (e) { return { success: false, message: String(e) }; }\r\n}\r\n\r\nexport async function deleteUnit(id: string) {\r\n    try {\r\n        await requireAdmin();\r\n        const admin = createAdminClient();\r\n        const { error } = await admin.from('units').delete().eq('id', id);\r\n        if (error) throw error;\r\n        return { success: true };\r\n    } catch (e) { return { success: false, message: String(e) }; }\r\n}\r\n\r\n// LESSONS\r\nexport async function createLesson(unitId: string, data: LessonData) {\r\n    try {\r\n        await requireAdmin();\r\n        const admin = createAdminClient();\r\n        const { error } = await admin.from('lessons').insert({\r\n            unit_id: unitId,\r\n            title: data.title,\r\n            video_url: data.videoUrl,\r\n            duration: data.duration,\r\n            is_free: data.isFree,\r\n            order: data.order,\r\n            created_at: new Date().toISOString()\r\n        });\r\n        if (error) throw error;\r\n        return { success: true };\r\n    } catch (e) { return { success: false, message: String(e) }; }\r\n}\r\n\r\nexport async function deleteLesson(id: string) {\r\n    try {\r\n        await requireAdmin();\r\n        const admin = createAdminClient();\r\n        const { error } = await admin.from('lessons').delete().eq('id', id);\r\n        if (error) throw error;\r\n        return { success: true };\r\n    } catch (e) { return { success: false, message: String(e) }; }\r\n}\r\n","usedDeprecatedRules":[]}]